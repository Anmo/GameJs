!function(){"use strict";var t,e=0,n=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(n){var i=Math.max(0,16-((t=(new Date).getTime())-e)),s=setTimeout(function(){n(t+i)},i);return e=t+i,s},i=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||function(t){clearTimeout(t)},s=function(){return this.init()};s.prototype={init:function(){this._objects=[],this._triggers={};var t=this;return"ontouchstart"in window?(this._start="touchstart",this._end="touchend"):(this._start="mousedown",this._end="mouseup"),window.addEventListener("keydown",function(e){for(var n=t._triggers[e.keyCode]||[],i=0,s=n.length;s>i;i++){var a=n[i],r=a[0],o=a[1],u=o.ms;(o=r._actions[o.start]).status||t._raf(r,o,u)}}),window.addEventListener("keyup",function(e){for(var n=t._triggers[e.keyCode]||[],s=0,a=n.length;a>s;s++){var r=n[s],o=r[0],u=r[1],c=u.ms,m=o._actions[u.start];i(m.status),delete m.status,(u=o._actions[u.end]).status||t._raf(o,u,c)}}),this},_raf:function(t,e,i){var s,a=this,r=function(o){s||(s=o);var u=!0,c=o-s;c>=i&&(s=0,u=e.cb.call(t,a)),u?e.status=n(r):delete e.status};e.status=n(r)},trigger:function(t,e){var n=this,s=e.trigger,a=t._actions[e.start],r=t._actions[e.end],o=e.ms;s&&(s.addEventListener(this._start,function(e){a.status||n._raf(t,a,o),e.preventDefault()}),s.addEventListener(this._end,function(e){i(a.status),delete a.status,r.status||n._raf(t,r,o),e.preventDefault()}))},createObject:function(){return this._Object.apply(this,[this].concat(arguments))}};var a=s.prototype._Object=function(t){return this instanceof a?((this._game=t)._objects.push(this),this.init()):new this._Object(t)};if(a.prototype={init:function(){return this._actions={},this},action:function(t,e){return this._actions[t]={cb:e},this},trigger:function(t){return"start"in t&&!(t.start in this._actions)||"end"in t&&!(t.end in this._actions)?this:"number"==typeof t.trigger&&"trigger"in t?((this._game._triggers[t.trigger]=this._game._triggers[t.trigger]||[]).push([this,t]),this):(this._game.trigger(this,t),this)}},"object"==typeof module&&module.exports)module.exports=s;else if("function"==typeof define&&define.amd)define("GameJs",s);else{if("undefined"==typeof window)return s;window.GameJs=s}}();